# Mediaflux Network Services Configuration Script
#
# (Generated by the DaRIS chef recipe ...)
# 
# Configure this script to configure network services to be started
# when the system is started.
#
# To see the complete set of available types of network services, 
# use the service:
#
#   network.type.list
#
# By default, the service will broadcast on all available network
# addresses. To specify a particular address, use the "address"
# argument in network.start. For example:
#
#   network.start :type http :address 192.168.1.1 :port 80 
#

# Start TCPIP service
#network.start :type tcpip :port 1967 :maxc 100

# Start HTTP service - the standard port for HTTP is 80:
<% if @http_port != "" %>
network.start :type http :port <%= @http_port %> :maxc 100
<% end %>

# Start HTTPS service (this is an HTTP protocol using 
# security) - the standard port for HTTPS is 443:
<% if @https_port != "" %>
network.start :type http :ssl true :port <%= @https_port %> :maxc 100
<% end %>

# Start DICOM service 
<% if @dicom_port != "" %>
network.start :type dicom :port <%= @dicom_port %> \
        :arg -name "asset.engine" "nig.dicom,pss" \
        :arg -name "authentication.domain" "dicom" \
        :arg -name "dicom.anonymize" "(0010,0010)" \
        :arg -name "dicom.title" "DaRIS-UM-1" \
        :arg -name "study.load.services" "om.pssd.dicom.upload.notify" \
        :arg -name "nig.dicom.id.by" "study.id,patient.name.first" \
        :arg -name "nig.dicom.id.ignore-non-digits" "true" \
        :arg -name "nig.dicom.subject.create" "true" \
        :arg -name "pss.asset.namespace.root" "dicom" \
        :arg -name "pss.id.by" "study.id,patient.name.first" \
        :arg -name "pss.id.ignore-non-digits" "true" \
        :arg -name "pss.id.project.by" "patient.name.first" \
        :arg -name "pss.id.subject.by" "patient.id"
<% end %>
